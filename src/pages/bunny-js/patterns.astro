---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="Patrones - Bunny-JS">
  <style>
    .page {
      max-width: 900px;
      margin: 0 auto;
      padding: 3rem 2rem;
      background: #0f0f0f;
      min-height: 100vh;
    }

    h1 {
      font-size: 2rem;
      color: #fafafa;
      margin-bottom: 1rem;
      border-bottom: 1px solid #262626;
      padding-bottom: 1rem;
    }

    h2 {
      font-size: 1.3rem;
      color: #f59e0b;
      margin-top: 2rem;
      margin-bottom: 1rem;
      border-top: 1px solid #262626;
      padding-top: 1rem;
    }

    h3 {
      color: #a3a3a3;
      font-size: 1rem;
      margin-top: 1rem;
      margin-bottom: 0.75rem;
    }

    p {
      color: #a3a3a3;
      line-height: 1.7;
      margin-bottom: 1rem;
    }

    code {
      background: #2a2a2a;
      color: #fbbf24;
      padding: 0.2rem 0.4rem;
      border-radius: 0.2rem;
      font-family: "Monaco", monospace;
      font-size: 0.9rem;
    }

    pre {
      background: #1a1a1a;
      border: 1px solid #262626;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin: 1rem 0;
    }

    pre code {
      background: none;
      color: #fbbf24;
      padding: 0;
    }

    .box {
      background: #1a1a1a;
      border-left: 3px solid #f59e0b;
      padding: 1.5rem;
      margin: 1rem 0;
      border-radius: 0.25rem;
    }

    .nav {
      display: flex;
      justify-content: space-between;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #262626;
    }

    a {
      color: #f59e0b;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    ul {
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }

    li {
      color: #a3a3a3;
      margin-bottom: 0.75rem;
      line-height: 1.6;
    }
  </style>

  <div class="page">
    <h1>üí° Patrones y Mejores Pr√°cticas</h1>
    <p>Patrones comunes y c√≥mo usarlos correctamente en Bunny-JS.</p>

    <h2>Componentes Reutilizables</h2>
    <p>Crea funciones que retornen elementos configurables:</p>

    <pre><code is:raw>function createButton(label, color = "#f59e0b") {
  return BunnyJS.button()
    .text(label)
    .bg(color)
    .color("#000")
    .font("bold");
}

// Uso
createButton("Guardar", "#22c55e").insertIn("#app");
createButton("Cancelar", "#ef4444").insertIn("#app");</code></pre>

    <h2>Manejo de Estado</h2>
    <p>Mant√©n estado en un objeto y actualiza los elementos:</p>

    <pre><code is:raw>const state = {
  count: 0
};

const display = BunnyJS.div().text("0").insertIn("#app");

function increment() {
  state.count++;
  display.text(state.count.toString());
}

BunnyJS.button()
  .text("+")
  .on("click", increment)
  .insertIn("#app");</code></pre>

    <h2>Listas Din√°micas</h2>
    <p>Agregar y actualizar elementos en listas:</p>

    <pre><code is:raw>const items = [];
const list = BunnyJS.ul().insertIn("#app");

function addItem(text) {
  items.push(text);
  const li = BunnyJS.li().text(text).insertIn(list);
}

function render() {
  list.innerHTML = "";
  items.forEach(text => {
    BunnyJS.li().text(text).insertIn(list);
  });
}

addItem("Primero");
addItem("Segundo");
render();</code></pre>

    <h2>Eventos Delegados</h2>
    <p>Maneja eventos en m√∫ltiples elementos eficientemente:</p>

    <pre><code is:raw>const container = BunnyJS.div()
  .on("click", (e) => {
    const target = e.target;
    if (target.matches(".delete")) {
      target.parentElement.remove();
    }
  })
  .insertIn("#app");

// Agregar items sin handlers individuales
for (let i = 0; i < 100; i++) {
  BunnyJS.button()
    .text("Delete")
    .attr("class", "delete")
    .insertIn(container);
}</code></pre>

    <h2>Condicionales</h2>
    <p>Mostrar/ocultar contenido seg√∫n condiciones:</p>

    <pre><code is:raw>const loading = BunnyJS.p().text("Cargando...").hide();
const content = BunnyJS.div().hide();
const error = BunnyJS.p().text("Error").hide();

[loading, content, error].forEach(el => el.insertIn("#app"));

function setState(state) {
  loading.hide(); content.hide(); error.hide();
  
  if (state === "loading") loading.show();
  else if (state === "content") content.show();
  else if (state === "error") error.show();
}

setState("loading"); // Muestra solo loading</code></pre>

    <h2>Validaci√≥n de Formularios</h2>
    <p>Valida entrada de usuario de forma simple:</p>

    <pre><code is:raw>const input = BunnyJS.input({ type: "email" });
const error = BunnyJS.p().hide();
const btn = BunnyJS.button().text("Enviar");

[input, error, btn].forEach(el => el.insertIn("#form"));

btn.on("click", () => {
  const value = input.value;
  
  if (!value.includes("@")) {
    error.text("Email inv√°lido").color("#ef4444").show();
    return;
  }
  
  error.hide();
  console.log("V√°lido:", value);
});</code></pre>

    <h2>Mejores Pr√°cticas</h2>

    <div class="box">
      <strong style="color: #22c55e;">‚úì Haz:</strong> Extrae patrones comunes a funciones
    </div>

    <div class="box">
      <strong style="color: #22c55e;">‚úì Haz:</strong> Usa nombres descriptivos para
      variables
    </div>

    <div class="box">
      <strong style="color: #22c55e;">‚úì Haz:</strong> Encadena m√©todos cuando sea
      legible
    </div>

    <div class="box">
      <strong style="color: #ef4444;">‚úó No hagas:</strong> Acceso directo a .innerHTML
      sin validaci√≥n
    </div>

    <div class="box">
      <strong style="color: #ef4444;">‚úó No hagas:</strong> Crear elementos sin insertarlos
      al DOM
    </div>

    <div class="box">
      <strong style="color: #ef4444;">‚úó No hagas:</strong> Mezclar .text() y .textContent
      simult√°neamente
    </div>

    <h2>Anti-Patrones a Evitar</h2>

    <pre><code>// ‚úó MAL - Elemento suelto nunca se inserta
const orphan = BunnyJS.button().text("Nadie me ve");

// ‚úì BIEN - Insertar directamente
BunnyJS.button().text("Me ves").insertIn("#app");

// ‚úó MAL - innerHTML sin validaci√≥n (XSS)
const div = BunnyJS.div();
div.innerHTML = userInput;

// ‚úì BIEN - Usar .text() que es seguro
BunnyJS.div().text(userInput).insertIn("#app");</code></pre>

    <div class="nav">
      <a href="/bunny-js/architecture">‚Üê Arquitectura</a>
      <a href="/bunny-js/troubleshooting">Troubleshooting ‚Üí</a>
    </div>
  </div>
</Layout>
