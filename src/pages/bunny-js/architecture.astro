---
import Layout from "../../layouts/Layout.astro";
---

<Layout title="Arquitectura - Bunny-JS">
  <style>
    .page {
      max-width: 900px;
      margin: 0 auto;
      padding: 3rem 2rem;
      background: #0f0f0f;
      min-height: 100vh;
    }

    h1 {
      font-size: 2rem;
      color: #fafafa;
      margin-bottom: 1rem;
      border-bottom: 1px solid #262626;
      padding-bottom: 1rem;
    }

    h2 {
      font-size: 1.3rem;
      color: #f59e0b;
      margin-top: 2rem;
      margin-bottom: 1rem;
      border-top: 1px solid #262626;
      padding-top: 1rem;
    }

    p {
      color: #a3a3a3;
      line-height: 1.7;
      margin-bottom: 1rem;
    }

    code {
      background: #2a2a2a;
      color: #fbbf24;
      padding: 0.2rem 0.4rem;
      border-radius: 0.2rem;
      font-family: "Monaco", monospace;
      font-size: 0.9rem;
    }

    pre {
      background: #1a1a1a;
      border: 1px solid #262626;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-x: auto;
      margin: 1rem 0;
    }

    pre code {
      background: none;
      color: #fbbf24;
      padding: 0;
    }

    .box {
      background: #1a1a1a;
      border-left: 3px solid #f59e0b;
      padding: 1.5rem;
      margin: 1rem 0;
      border-radius: 0.25rem;
    }

    .nav {
      display: flex;
      justify-content: space-between;
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #262626;
    }

    a {
      color: #f59e0b;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    ul {
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }

    li {
      color: #a3a3a3;
      margin-bottom: 0.75rem;
      line-height: 1.6;
    }
  </style>

  <div class="page">
    <h1>üèóÔ∏è Arquitectura</h1>
    <p>Entender c√≥mo funciona Bunny-JS internamente.</p>

    <h2>El Sistema Proxy</h2>
    <p>
      Bunny-JS usa un <code>Proxy</code> para interceptar llamadas a m√©todos que crean
      elementos:
    </p>

    <pre><code>BunnyJS.button()
  ‚Üì
Proxy intercepta "button"
  ‚Üì
Valida etiqueta HTML v√°lida
  ‚Üì
document.createElement("button")
  ‚Üì
Mejora el elemento
  ‚Üì
Retorna elemento mejorado</code></pre>

    <h2>Proceso de Mejora</h2>
    <p>Cada elemento pasa por una cadena de mejoras que agregan m√©todos:</p>

    <div class="box">
      <strong>HTMLElement nativo</strong>
      <div style="color: #fbbf24; margin: 0.5rem 0;">‚Üì</div>
      <strong>withActions()</strong> - show, hide, toggle, insertIn
      <div style="color: #fbbf24; margin: 0.5rem 0;">‚Üì</div>
      <strong>withHelpers()</strong> - text, link, item, attr, on
      <div style="color: #fbbf24; margin: 0.5rem 0;">‚Üì</div>
      <strong>withStyles()</strong> - bg, color, font, spacing
      <div style="color: #fbbf24; margin: 0.5rem 0;">‚Üì</div>
      <strong>BunnyExtendedElement</strong> (completo)
    </div>

    <h2>M√©todos: Categorizaci√≥n</h2>

    <h3 style="color: #a3a3a3; margin-top: 1.5rem;">Actions (Visibilidad)</h3>
    <ul>
      <li><code>show(display?)</code> - Mostrar elemento</li>
      <li><code>hide()</code> - Ocultar elemento</li>
      <li><code>toggle(className)</code> - Alternar clases</li>
      <li><code>insertIn(target)</code> - Insertar en el DOM</li>
    </ul>

    <h3 style="color: #a3a3a3; margin-top: 1.5rem;">Helpers (Contenido)</h3>
    <ul>
      <li><code>text(content)</code> - Establecer texto</li>
      <li><code>link(text, href, attrs?)</code> - Crear enlace</li>
      <li><code>item(text, attrs?)</code> - Crear &lt;li&gt;</li>
      <li><code>attr(key, value?)</code> - Atributos HTML</li>
      <li><code>on(event, handler)</code> - Event listeners</li>
    </ul>

    <h3 style="color: #a3a3a3; margin-top: 1.5rem;">Styles (Apariencia)</h3>
    <ul>
      <li><code>bg(color)</code> - Color de fondo</li>
      <li><code>color(color)</code> - Color de texto</li>
      <li><code>font(fontString)</code> - Propiedad font</li>
      <li><code>spacing(margin?, padding?)</code> - Espaciado</li>
    </ul>

    <h2>Por qu√© este dise√±o</h2>

    <div class="box">
      <strong style="color: #f59e0b;">Modular:</strong> Cada categor√≠a es independiente
      pero coordinada.
    </div>

    <div class="box">
      <strong style="color: #f59e0b;">No Invasivo:</strong> No modifica prototipos
      globales. Solo elementos creados con Bunny-JS.
    </div>

    <div class="box">
      <strong style="color: #f59e0b;">Type-Safe:</strong> TypeScript proporciona autocompletado
      perfecto.
    </div>

    <div class="box">
      <strong style="color: #f59e0b;">Encadenable:</strong> Todos los m√©todos retornan
      el elemento modificado.
    </div>

    <h2>Ejemplo: Flujo Completo</h2>

    <pre><code>// Lo que escribes:
BunnyJS.button()
  .text("Guardar")
  .bg("#f59e0b")
  .on("click", handleClick)
  .insertIn("#app");

// Lo que sucede internamente:
// 1. Proxy intercepta "button"
// 2. Crea: document.createElement("button")
// 3. Mejora: withActions, withHelpers, withStyles
// 4. .text() ‚Üí textContent = "Guardar"; retorna btn
// 5. .bg() ‚Üí style.backgroundColor = "#f59e0b"; retorna btn
// 6. .on() ‚Üí addEventListener("click", ...); retorna btn
// 7. .insertIn() ‚Üí document.querySelector("#app").appendChild(btn)</code></pre>

    <h2>Performance</h2>
    <p>Bunny-JS es extremadamente eficiente:</p>
    <ul>
      <li><strong>Sin dependencias:</strong> Cero overhead externo</li>
      <li><strong>Peque√±o:</strong> ~2kb minificado + gzipeado</li>
      <li><strong>R√°pido:</strong> Solo manejo nativo del DOM</li>
      <li><strong>Directo:</strong> Sin abstracci√≥n innecesaria</li>
    </ul>

    <div class="nav">
      <a href="/bunny-js/api">‚Üê API Referencia</a>
      <a href="/bunny-js/patterns">Patrones ‚Üí</a>
    </div>
  </div>
</Layout>
